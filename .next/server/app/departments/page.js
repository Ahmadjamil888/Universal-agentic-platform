(()=>{var e={};e.id=519,e.ids=[519],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},48064:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(18893),s(39030),s(35866);var a=s(23191),r=s(88716),n=s(37922),i=s.n(n),d=s(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o=["",{children:["departments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,18893)),"D:\\Downloads\\uap-ai-flow\\app\\departments\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,39030)),"D:\\Downloads\\uap-ai-flow\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Downloads\\uap-ai-flow\\app\\departments\\page.tsx"],m="/departments/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/departments/page",pathname:"/departments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},20958:(e,t,s)=>{Promise.resolve().then(s.bind(s,43180))},43180:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(10326),r=s(17577),n=s(59813),i=s(35047),d=s(30110),l=s(90772),o=s(33071),c=s(567),m=s(83855),p=s(59734),x=s(231);let u=(0,s(76557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=s(70003),h=s(98091),j=s(24061),g=s(90434),y=s(60097);function N(){let[e,t]=(0,r.useState)(null),[s,N]=(0,r.useState)(""),[b,v]=(0,r.useState)([]),[w,_]=(0,r.useState)(!0);(0,i.useRouter)();let Z=(0,n.createClientComponentClient)(),z=async e=>{if(confirm("Are you sure you want to delete this department? This action cannot be undone."))try{let{error:t}=await Z.from("departments").delete().eq("id",e);if(t)throw t;v(b.filter(t=>t.id!==e))}catch(e){console.error("Error deleting department:",e),alert("Failed to delete department. Please try again.")}},P=["owner","admin"].includes(s);return w?a.jsx(d.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):a.jsx(d.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Departments"}),a.jsx("p",{className:"text-gray-600 mt-1",children:P?"Manage departments and their AI resources":"View your department and AI resources"})]}),P&&a.jsx(g.default,{href:"/departments/create",children:(0,a.jsxs)(l.z,{className:"flex items-center space-x-2",children:[a.jsx(m.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Department"})]})})]}),0===b.length?a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx(p.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No departments found"}),a.jsx("p",{className:"text-gray-600 text-center mb-6",children:P?"Get started by creating your first department":"No departments are currently assigned to you"}),P&&a.jsx(g.default,{href:"/departments/create",children:(0,a.jsxs)(l.z,{children:[a.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Create Department"]})})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(e=>(0,a.jsxs)(o.Zb,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(o.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(o.ll,{className:"text-lg",children:e.name}),a.jsx(o.SZ,{className:"mt-1",children:e.description||"No description provided"})]}),P&&(0,a.jsxs)(y.h_,{children:[a.jsx(y.$F,{asChild:!0,children:a.jsx(l.z,{variant:"ghost",size:"sm",children:a.jsx(x.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(y.AW,{align:"end",children:[a.jsx(y.Xi,{asChild:!0,children:(0,a.jsxs)(g.default,{href:`/departments/${e.id}`,children:[a.jsx(u,{className:"h-4 w-4 mr-2"}),"View Details"]})}),a.jsx(y.Xi,{asChild:!0,children:(0,a.jsxs)(g.default,{href:`/departments/${e.id}/edit`,children:[a.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})}),(0,a.jsxs)(y.Xi,{onClick:()=>z(e.id),className:"text-red-600",children:[a.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),a.jsx(o.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Department Head"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.head_user?.full_name||e.head_user?.email||"Not assigned"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(j.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.member_count," members"]})]}),(0,a.jsxs)(c.C,{variant:"secondary",className:"flex items-center space-x-1",children:[a.jsx(p.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.agent_count," agents"]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(g.default,{href:`/departments/${e.id}`,className:"flex-1",children:a.jsx(l.z,{variant:"outline",size:"sm",className:"w-full",children:"View Details"})}),a.jsx(g.default,{href:`/departments/${e.id}/agents`,children:a.jsx(l.z,{size:"sm",variant:"outline",children:"Manage AI"})})]})]})})]},e.id))})]})})}},567:(e,t,s)=>{"use strict";s.d(t,{C:()=>d});var a=s(10326);s(17577);var r=s(79360),n=s(77863);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...s}){return a.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},60097:(e,t,s)=>{"use strict";s.d(t,{$F:()=>m,AW:()=>p,Xi:()=>x,h_:()=>c});var a=s(10326),r=s(17577),n=s(50269),i=s(39183),d=s(32933),l=s(53982),o=s(77863);let c=n.fC,m=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,r.forwardRef(({className:e,inset:t,children:s,...r},d)=>(0,a.jsxs)(n.fF,{ref:d,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,a.jsx(i.Z,{className:"ml-auto h-4 w-4"})]})).displayName=n.fF.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(n.tu,{ref:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=n.tu.displayName;let p=r.forwardRef(({className:e,sideOffset:t=4,...s},r)=>a.jsx(n.Uv,{children:a.jsx(n.VY,{ref:r,sideOffset:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));p.displayName=n.VY.displayName;let x=r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(n.ck,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));x.displayName=n.ck.displayName,r.forwardRef(({className:e,children:t,checked:s,...r},i)=>(0,a.jsxs)(n.oC,{ref:i,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(n.wU,{children:a.jsx(d.Z,{className:"h-4 w-4"})})}),t]})).displayName=n.oC.displayName,r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(n.Rk,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(n.wU,{children:a.jsx(l.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=n.Rk.displayName,r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(n.__,{ref:r,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s})).displayName=n.__.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(n.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n.Z0.displayName},18893:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`D:\Downloads\uap-ai-flow\app\departments\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,54,545,404,952,138,274],()=>s(48064));module.exports=a})();