(()=>{var e={};e.id=297,e.ids=[297],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},87272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(57311),s(39030),s(35866);var a=s(23191),r=s(88716),i=s(37922),n=s.n(i),d=s(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o=["",{children:["departments",{children:["[id]",{children:["agents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,57311)),"D:\\Downloads\\uap-ai-flow\\app\\departments\\[id]\\agents\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,39030)),"D:\\Downloads\\uap-ai-flow\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Downloads\\uap-ai-flow\\app\\departments\\[id]\\agents\\page.tsx"],m="/departments/[id]/agents/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/departments/[id]/agents/page",pathname:"/departments/[id]/agents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},50902:(e,t,s)=>{Promise.resolve().then(s.bind(s,9473))},9473:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(10326),r=s(17577),i=s(59813),n=s(35047),d=s(30110),l=s(90772),o=s(33071),c=s(567),m=s(83855),x=s(50732),p=s(231),u=s(76557);let f=(0,u.Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),h=(0,u.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var g=s(70003),j=s(98091),y=s(90434),v=s(60097);function N(){let[e,t]=(0,r.useState)(null),[s,u]=(0,r.useState)(""),[N,b]=(0,r.useState)(null),[w,_]=(0,r.useState)([]),[Z,C]=(0,r.useState)(!0),[P,q]=(0,r.useState)(!1),z=(0,n.useRouter)(),A=(0,n.useParams)().id,k=(0,i.createClientComponentClient)(),D=async(e,t)=>{try{let{error:s}=await k.from("agents").update({config:{...w.find(t=>t.id===e)?.config,is_active:!t}}).eq("id",e);if(s)throw s;_(w.map(s=>s.id===e?{...s,is_active:!t}:s))}catch(e){console.error("Error toggling agent status:",e),alert("Failed to update agent status")}},R=async e=>{if(confirm("Are you sure you want to delete this agent? This action cannot be undone."))try{await k.from("agent_department_associations").delete().eq("agent_id",e).eq("department_id",A);let{error:t}=await k.from("agents").delete().eq("id",e);if(t)throw t;_(w.filter(t=>t.id!==e))}catch(e){console.error("Error deleting agent:",e),alert("Failed to delete agent. Please try again.")}};return Z?a.jsx(d.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):N&&P?a.jsx(d.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["AI Agents - ",N.name]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage AI agents for this department"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(y.default,{href:`/departments/${N.id}`,children:a.jsx(l.z,{variant:"outline",children:"Back to Department"})}),a.jsx(y.default,{href:`/departments/${N.id}/agents/create`,children:(0,a.jsxs)(l.z,{className:"flex items-center space-x-2",children:[a.jsx(m.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Create Agent"})]})})]})]}),0===w.length?a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx(x.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No agents found"}),a.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Get started by creating your first AI agent for this department"}),a.jsx(y.default,{href:`/departments/${N.id}/agents/create`,children:(0,a.jsxs)(l.z,{children:[a.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Create Agent"]})})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(e=>(0,a.jsxs)(o.Zb,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(o.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(o.ll,{className:"text-lg flex items-center space-x-2",children:[a.jsx(x.Z,{className:"h-5 w-5 text-primary"}),a.jsx("span",{children:e.name})]}),a.jsx(o.SZ,{className:"mt-1",children:e.description||"No description provided"})]}),(0,a.jsxs)(v.h_,{children:[a.jsx(v.$F,{asChild:!0,children:a.jsx(l.z,{variant:"ghost",size:"sm",children:a.jsx(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(v.AW,{align:"end",children:[a.jsx(v.Xi,{onClick:()=>D(e.id,e.is_active||!1),children:e.is_active?(0,a.jsxs)(a.Fragment,{children:[a.jsx(f,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(h,{className:"h-4 w-4 mr-2"}),"Activate"]})}),a.jsx(v.Xi,{asChild:!0,children:(0,a.jsxs)(y.default,{href:`/departments/${N.id}/agents/${e.id}/edit`,children:[a.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})}),(0,a.jsxs)(v.Xi,{onClick:()=>R(e.id),className:"text-red-600",children:[a.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),a.jsx(o.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`h-2 w-2 rounded-full ${e.is_active?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm text-gray-600",children:e.is_active?"Active":"Inactive"})]}),a.jsx(c.C,{variant:"secondary",className:"text-xs",children:e.model_provider})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Model"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.model_name})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Created"}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(l.z,{variant:"outline",size:"sm",className:"flex-1",children:"Test Agent"}),a.jsx(l.z,{size:"sm",className:"flex-1",children:"Configure"})]})]})})]},e.id))})]})}):a.jsx(d.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"You don't have permission to view this department."}),a.jsx(l.z,{onClick:()=>z.push("/departments"),className:"mt-4",children:"Back to Departments"})]})})})}},567:(e,t,s)=>{"use strict";s.d(t,{C:()=>d});var a=s(10326);s(17577);var r=s(79360),i=s(77863);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...s}){return a.jsx("div",{className:(0,i.cn)(n({variant:t}),e),...s})}},60097:(e,t,s)=>{"use strict";s.d(t,{$F:()=>m,AW:()=>x,Xi:()=>p,h_:()=>c});var a=s(10326),r=s(17577),i=s(50269),n=s(39183),d=s(32933),l=s(53982),o=s(77863);let c=i.fC,m=i.xz;i.ZA,i.Uv,i.Tr,i.Ee,r.forwardRef(({className:e,inset:t,children:s,...r},d)=>(0,a.jsxs)(i.fF,{ref:d,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,a.jsx(n.Z,{className:"ml-auto h-4 w-4"})]})).displayName=i.fF.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(i.tu,{ref:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=i.tu.displayName;let x=r.forwardRef(({className:e,sideOffset:t=4,...s},r)=>a.jsx(i.Uv,{children:a.jsx(i.VY,{ref:r,sideOffset:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));x.displayName=i.VY.displayName;let p=r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(i.ck,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));p.displayName=i.ck.displayName,r.forwardRef(({className:e,children:t,checked:s,...r},n)=>(0,a.jsxs)(i.oC,{ref:n,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(d.Z,{className:"h-4 w-4"})})}),t]})).displayName=i.oC.displayName,r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(i.Rk,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(l.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=i.Rk.displayName,r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(i.__,{ref:r,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s})).displayName=i.__.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(i.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.Z0.displayName},57311:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`D:\Downloads\uap-ai-flow\app\departments\[id]\agents\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,54,545,404,952,138,274],()=>s(87272));module.exports=a})();