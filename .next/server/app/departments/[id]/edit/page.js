(()=>{var e={};e.id=120,e.ids=[120],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},93912:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(10159),s(39030),s(35866);var a=s(23191),r=s(88716),i=s(37922),d=s.n(i),n=s(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=["",{children:["departments",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,10159)),"D:\\Downloads\\uap-ai-flow\\app\\departments\\[id]\\edit\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,39030)),"D:\\Downloads\\uap-ai-flow\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Downloads\\uap-ai-flow\\app\\departments\\[id]\\edit\\page.tsx"],p="/departments/[id]/edit/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/departments/[id]/edit/page",pathname:"/departments/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},32947:(e,t,s)=>{Promise.resolve().then(s.bind(s,45682))},45682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(10326),r=s(17577),i=s(59813),d=s(35047),n=s(30110),l=s(90772),c=s(33071),o=s(86333),p=s(59734),m=s(24061),h=s(90434);function u(){let[e,t]=(0,r.useState)(null),[s,u]=(0,r.useState)(""),[x,y]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[v,g]=(0,r.useState)([]),[k,b]=(0,r.useState)(!0),[N,Z]=(0,r.useState)(!1),[w,M]=(0,r.useState)(""),[q,_]=(0,r.useState)(!1),D=(0,d.useRouter)(),C=(0,d.useParams)().id,P=(0,i.createClientComponentClient)(),S=async t=>{t.preventDefault(),Z(!0),M("");try{if(!e)throw Error("Department not found");let{error:t}=await P.from("departments").update({name:s.trim(),description:x.trim()||null,head_user_id:f}).eq("id",C);if(t)throw t;D.push(`/departments/${C}`)}catch(e){console.error("Error updating department:",e),M(e.message||"Failed to update department")}finally{Z(!1)}};return k?a.jsx(n.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):q&&e?a.jsx(n.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx(h.default,{href:`/departments/${C}`,children:(0,a.jsxs)(l.z,{variant:"ghost",size:"sm",children:[a.jsx(o.Z,{className:"h-4 w-4 mr-2"}),"Back to Department"]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(p.Z,{className:"h-6 w-6 text-primary"}),a.jsx("h1",{className:"text-xl font-semibold",children:"Edit Department"})]})]})}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[a.jsx(c.ll,{children:"Department Information"}),a.jsx(c.SZ,{children:"Update the department details and assign a department head"})]}),a.jsx(c.aY,{children:(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department Name *"}),a.jsx("input",{id:"name",type:"text",value:s,onChange:e=>u(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"e.g., Engineering, Sales, Marketing"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{id:"description",value:x,onChange:e=>y(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Describe the department's purpose and responsibilities..."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"headUser",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department Head *"}),(0,a.jsxs)("select",{id:"headUser",value:f,onChange:e=>j(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a department head..."}),v.map(e=>a.jsx("option",{value:e.id,children:e.full_name||e.email},e.id))]}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The department head will have additional permissions to manage this department"})]}),w&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:w}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[a.jsx(h.default,{href:`/departments/${C}`,children:a.jsx(l.z,{variant:"outline",type:"button",children:"Cancel"})}),a.jsx(l.z,{type:"submit",disabled:N,children:N?"Saving...":"Save Changes"})]})]})})]}),(0,a.jsxs)(c.Zb,{className:"mt-6",children:[a.jsx(c.Ol,{children:(0,a.jsxs)(c.ll,{className:"text-lg flex items-center space-x-2",children:[a.jsx(m.Z,{className:"h-5 w-5"}),a.jsx("span",{children:"Department Overview"})]})}),a.jsx(c.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Name"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.name})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Description"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.description||"No description"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Head"}),a.jsx("p",{className:"text-sm text-gray-600",children:v.find(t=>t.id===e.head_user_id)?.full_name||v.find(t=>t.id===e.head_user_id)?.email||"Not assigned"})]})]})})]})]})]})}):a.jsx(n.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"You don't have permission to edit this department."}),a.jsx(l.z,{onClick:()=>D.push("/departments"),className:"mt-4",children:"Back to Departments"})]})})})}},66697:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},76464:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},50732:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},59734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},941:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},39183:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},90748:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88378:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3634:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},90434:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(79404),r=s.n(a)},10159:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`D:\Downloads\uap-ai-flow\app\departments\[id]\edit\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,54,545,404,274],()=>s(93912));module.exports=a})();