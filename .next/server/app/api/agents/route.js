"use strict";(()=>{var e={};e.id=529,e.ids=[529],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},34371:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{GET:()=>d,POST:()=>p});var o=r(49303),a=r(88716),s=r(60670),i=r(85662),u=r(87070);async function p(e){try{let t=(0,i.l)(),{data:{user:r}}=await t.auth.getUser();if(!r)return u.NextResponse.json({error:"Unauthorized"},{status:401});let{name:n,description:o,modelProvider:a,modelName:s,config:p}=await e.json(),{data:d}=await t.from("organization_members").select("organization_id").eq("user_id",r.id).single();if(!d)return u.NextResponse.json({error:"Organization not found"},{status:404});let{data:c,error:l}=await t.from("agents").insert({organization_id:d.organization_id,name:n,description:o,model_provider:a,model_name:s,config:p||{}}).select().single();if(l)return u.NextResponse.json({error:"Failed to create agent"},{status:500});return u.NextResponse.json({agent:c})}catch(e){return console.error("Error creating agent:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){try{let e=(0,i.l)(),{data:{user:t}}=await e.auth.getUser();if(!t)return u.NextResponse.json({error:"Unauthorized"},{status:401});let{data:r}=await e.from("organization_members").select("organization_id").eq("user_id",t.id).single();if(!r)return u.NextResponse.json({error:"Organization not found"},{status:404});let{data:n,error:o}=await e.from("agents").select("*").eq("organization_id",r.organization_id).order("created_at",{ascending:!1});if(o)return u.NextResponse.json({error:"Failed to fetch agents"},{status:500});return u.NextResponse.json({agents:n})}catch(e){return console.error("Error fetching agents:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/agents/route",pathname:"/api/agents",filename:"route",bundlePath:"app/api/agents/route"},resolvedPagePath:"D:\\Downloads\\uap-ai-flow\\app\\api\\agents\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:x}=c,m="/api/agents/route";function f(){return(0,s.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}},85662:(e,t,r)=>{r.d(t,{l:()=>a});var n=r(20344),o=r(71615);let a=()=>(0,n.createServerComponentClient)({cookies:o.cookies})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,562,581],()=>r(34371));module.exports=n})();