(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[846],{5719:function(e,t,a){Promise.resolve().then(a.bind(a,6316))},6316:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(7437),n=a(2265),s=a(5452),i=a(9376),l=a(8387),d=a(2869),o=a(6070),c=a(2660),u=a(2222),m=a(2023),h=a(7648);function p(){let[e,t]=(0,n.useState)(""),[a,p]=(0,n.useState)(""),[x,f]=(0,n.useState)("gemini"),[g,y]=(0,n.useState)("gemini-pro"),[v,k]=(0,n.useState)(""),[b,j]=(0,n.useState)(!1),[N,w]=(0,n.useState)(""),[Z,M]=(0,n.useState)(null),[_,C]=(0,n.useState)(!1),z=(0,i.useRouter)(),S=(0,i.useParams)().id,q=(0,s.createClientComponentClient)();(0,n.useEffect)(()=>{let e=async()=>{let{data:{user:e}}=await q.auth.getUser();if(!e){z.push("/auth/login");return}let{data:t}=await q.from("organization_members").select("role, organization_id").eq("user_id",e.id).single();if(!t){z.push("/organization/setup");return}let a=!1;if("owner"===t.role||"admin"===t.role)a=!0;else{let{data:t}=await q.from("department_members").select("id").eq("department_id",S).eq("user_id",e.id).single();a=!!t}if(!a){alert("You do not have access to this department"),z.push("/departments");return}C(!0);let{data:r,error:n}=await q.from("departments").select("id, name, organization_id").eq("id",S).single();if(n||!r){console.error("Error loading department:",n),z.push("/departments");return}M(r)};S&&e()},[z,q,S]);let A=async t=>{t.preventDefault(),j(!0),w("");try{if(!Z)throw Error("Department not found");let{data:t,error:r}=await q.from("agents").insert({organization_id:Z.organization_id,name:e,description:a,model_provider:x,model_name:g,config:{prompt:v,is_active:!1}}).select().single();if(r)throw r;let{error:n}=await q.from("agent_department_associations").insert({agent_id:t.id,department_id:S});if(n)throw n;z.push("/departments/".concat(S,"/agents"))}catch(e){console.error("Error creating agent:",e),w(e.message||"Failed to create agent")}finally{j(!1)}},P=e=>{switch(f(e),e){case"gemini":y("gemini-pro");break;case"deepseek":y("deepseek-chat");break;case"openai":y("gpt-4");break;default:y("")}};return _&&Z?(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsx)(h.default,{href:"/departments/".concat(S,"/agents"),children:(0,r.jsxs)(d.z,{variant:"ghost",size:"sm",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Back to Agents"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.Z,{className:"h-6 w-6 text-primary"}),(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"Create New AI Agent"})]})]}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Creating agent for department: ",(0,r.jsx)("span",{className:"font-medium",children:Z.name})]})]}),(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5 text-primary"}),(0,r.jsx)("span",{children:"Agent Configuration"})]}),(0,r.jsxs)(o.SZ,{children:["Configure your AI agent for the ",Z.name," department"]})]}),(0,r.jsx)(o.aY,{children:(0,r.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"agentName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent Name *"}),(0,r.jsx)("input",{id:"agentName",type:"text",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"e.g., Customer Support Bot"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{id:"description",value:a,onChange:e=>p(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Describe what this agent will do..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"modelProvider",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Model Provider *"}),(0,r.jsxs)("select",{id:"modelProvider",value:x,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,r.jsx)("option",{value:"gemini",children:"Google Gemini"}),(0,r.jsx)("option",{value:"deepseek",children:"DeepSeek"}),(0,r.jsx)("option",{value:"openai",children:"OpenAI"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"modelName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Model Name *"}),(0,r.jsx)("input",{id:"modelName",type:"text",value:g,onChange:e=>y(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"e.g., gemini-pro, gpt-4, deepseek-chat"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent Instructions *"}),(0,r.jsx)("textarea",{id:"prompt",value:v,onChange:e=>k(e.target.value),rows:8,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Provide detailed instructions for your AI agent. For example:  You are a customer support agent for a SaaS company. Your role is to: 1. Respond to customer inquiries professionally and helpfully 2. Escalate complex technical issues to the engineering team 3. Provide accurate information about our products and services 4. Maintain a friendly and solution-oriented tone  Always ask clarifying questions when needed and provide step-by-step solutions."})]}),N&&(0,r.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:N}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)(h.default,{href:"/departments/".concat(S,"/agents"),children:(0,r.jsx)(d.z,{variant:"outline",type:"button",children:"Cancel"})}),(0,r.jsx)(d.z,{type:"submit",disabled:b,children:b?"Creating Agent...":"Create Agent"})]})]})})]}),e&&(0,r.jsxs)(o.Zb,{className:"mt-6",children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsx)(o.ll,{className:"text-lg",children:"Agent Preview"}),(0,r.jsx)(o.SZ,{children:"This is how your agent will appear in the department dashboard"})]}),(0,r.jsx)(o.aY,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:e}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:a||"No description provided"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Model: ",x," - ",g]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Department: ",Z.name]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Inactive"})]})]})})]})]})]})}):(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})})}},4401:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},2660:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6221:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},2222:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},8420:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},875:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},407:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8293:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8728:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2023:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1239:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return n.a}});var r=a(2972),n=a.n(r)}},function(e){e.O(0,[284,523,972,672,971,117,744],function(){return e(e.s=5719)}),_N_E=e.O()}]);